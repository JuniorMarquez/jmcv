(function(b){b.fn.quicksand=function(y,l,q){var a={duration:750,easing:"swing",attribute:"data-id",adjustHeight:"auto",adjustWidth:"auto",useScaling:!1,enhancement:function(a){},selector:"> *",atomic:!1,dx:0,dy:0,maxWidth:0,retainExisting:!0};b.extend(a,l);if(navigator.userAgent.match(/msie/i)||"undefined"==typeof b.fn.scale)a.useScaling=!1;var s;"function"==typeof l?s=l:typeof("function"==q)&&(s=q);return this.each(function(c){var r,h=[],m;m="function"==typeof a.attribute?b(y):b(y).filter("["+a.attribute+ "]").clone();var g=b(this);c=b(this).css("height");var l=b(this).css("width"),t,q=!1,z=!1,n=b(g).offset(),u=[],p=b(this).find(a.selector),A=b(p).innerWidth();if(navigator.userAgent.match(/msie/i)&&navigator.userAgent.match(/6/))g.html("").append(m);else{var B=0,v=function(){b(this).css("margin","").css("position","").css("top","").css("left","").css("opacity","");if(!B){B=1;if(!a.atomic){var d=g.find(a.selector);if(a.retainExisting){var f=b([]);k.find(a.selector).each(function(e){var c=b([]);if("function"== typeof a.attribute){var h=a.attribute(b(this));d.each(function(){if(a.attribute(this)==h)return c=b(this),!1})}else c=d.filter("["+a.attribute+'="'+b(this).attr(a.attribute)+'"]');0<c.length&&(f=f.add(c),0===e?g.prepend(c):c.insertAfter(g.find(a.selector).get(e-1)))});d.not(f).remove()}else g.prepend(k.find(a.selector)),d.remove();q&&g.css("height",t);z&&g.css("width",l)}a.enhancement(g);"function"==typeof s&&s.call(this)}!1===a.adjustHeight&&g.css("height","auto");!1===a.adjustWidth&&g.css("width", "auto")},e=g.offsetParent(),d=e.offset();"relative"==e.css("position")?"body"!=e.get(0).nodeName.toLowerCase()&&(d.top+=parseFloat(e.css("border-top-width"))||0,d.left+=parseFloat(e.css("border-left-width"))||0):(d.top-=parseFloat(e.css("border-top-width"))||0,d.left-=parseFloat(e.css("border-left-width"))||0,d.top-=parseFloat(e.css("margin-top"))||0,d.left-=parseFloat(e.css("margin-left"))||0);isNaN(d.left)&&(d.left=0);isNaN(d.top)&&(d.top=0);d.left-=a.dx;d.top-=a.dy;g.css("height",b(this).height()); g.css("width",b(this).width());p.each(function(a){u[a]=b(this).offset()});b(this).stop();var w=0,x=0;p.each(function(c){b(this).stop();var f=b(this).get(0);"absolute"==f.style.position?(w=-a.dx,x=-a.dy):(w=a.dx,x=a.dy);f.style.position="absolute";f.style.margin="0";a.adjustWidth||(f.style.width=A+"px");f.style.top=u[c].top-parseFloat(f.style.marginTop)-d.top+x+"px";f.style.left=u[c].left-parseFloat(f.style.marginLeft)-d.left+w+"px";0<a.maxWidth&&u[c].left>a.maxWidth&&(f.style.display="none")});var k= b(g).clone(),e=k.get(0);e.innerHTML="";e.setAttribute("id","");e.style.height="auto";e.style.width=g.width()+"px";k.append(m);k.insertBefore(g);k.css("opacity",0);e.style.zIndex=-1;e.style.margin="0";e.style.position="absolute";e.style.top=n.top-d.top+"px";e.style.left=n.left-d.left+"px";"dynamic"===a.adjustHeight?g.animate({height:k.height()},a.duration,a.easing):"auto"===a.adjustHeight&&(t=k.height(),parseFloat(c)<parseFloat(t)?g.css("height",t):q=!0);"dynamic"===a.adjustWidth?g.animate({width:k.width()}, a.duration,a.easing):"auto"===a.adjustWidth&&(c=k.width(),parseFloat(l)<parseFloat(c)?g.css("width",c):z=!0);p.each(function(c){var f=[];"function"==typeof a.attribute?(r=a.attribute(b(this)),m.each(function(){if(a.attribute(this)==r)return f=b(this),!1})):f=m.filter("["+a.attribute+'="'+b(this).attr(a.attribute)+'"]');f.length?a.useScaling?h.push({element:b(this),dest:f,style:{top:b(this).offset().top,left:b(this).offset().left,opacity:""},animation:{top:f.offset().top-d.top,left:f.offset().left- d.left,opacity:1,scale:"1.0"}}):h.push({element:b(this),dest:f,style:{top:b(this).offset().top,left:b(this).offset().left,opacity:""},animation:{top:f.offset().top-d.top,left:f.offset().left-d.left,opacity:1}}):a.useScaling?h.push({element:b(this),animation:{opacity:"0.0",style:{top:b(this).offset().top,left:b(this).offset().left,opacity:""},scale:"0.0"}}):h.push({element:b(this),style:{top:b(this).offset().top,left:b(this).offset().left,opacity:""},animation:{opacity:"0.0"}})});m.each(function(c){var f= [],e=[];"function"==typeof a.attribute?(r=a.attribute(b(this)),p.each(function(){if(a.attribute(this)==r)return f=b(this),!1}),m.each(function(){if(a.attribute(this)==r)return e=b(this),!1})):(f=p.filter("["+a.attribute+'="'+b(this).attr(a.attribute)+'"]'),e=m.filter("["+a.attribute+'="'+b(this).attr(a.attribute)+'"]'));if(0===f.length&&0<e.length){c=a.useScaling?{opacity:"1.0",scale:"1.0"}:{opacity:"1.0"};var k=e.clone(),l=k.get(0);l.style.position="absolute";l.style.margin="0";a.adjustWidth||(l.style.width= A+"px");l.style.top=e.offset().top-d.top+"px";l.style.left=e.offset().left-d.left+"px";k.css("opacity",0);a.useScaling&&k.scale(0);k.appendTo(g);(0===a.maxWidth||e.offset().left<a.maxWidth)&&h.push({element:b(k),dest:e,animation:c})}});k.remove();if(a.atomic){$toDelete=g.find(a.selector);g.prepend(k.find(a.selector));for(c=0;c<h.length;c++)h[c].dest&&h[c].style?(n=h[c].dest,e=n.offset(),n.css({position:"relative",top:h[c].style.top-e.top,left:h[c].style.left-e.left}),n.animate({top:"0",left:"0"}, a.duration,a.easing,v)):h[c].element.animate(h[c].animation,a.duration,a.easing,v);$toDelete.remove()}else for(a.enhancement(g),c=0;c<h.length;c++)h[c].element.animate(h[c].animation,a.duration,a.easing,v)}})}})(jQuery);

var filter_container_data = {};

function triggerCerchezQuickSandInit(target) {
	jQuery('.filter-selectors', target).each(function() {
		$filter_selector = jQuery(this);

		var filter_container_selector = $filter_selector.data('container');
		var filter_container = jQuery('#' + filter_container_selector);
		filter_container_data[filter_container.attr('id')] = filter_container.clone();

		jQuery('a', $filter_selector).on("click", function(e) {
			e.preventDefault();
			var $this = jQuery(this);
			if ($this.hasClass('active')) return false;
			$this.parent().children('a').removeClass('active');
			$this.addClass('active');
			var filter = $this.data('filter');
			var filter_container = $this.parents('.filter-selectors').data('container');
			var filter_selector;
			if (filter == 'all') {
				filter_selector = '.filter-item';
			} else {
				filter_selector = '.filter-item[data-type~=' + filter + ']';
			}
			var $filteredData = filter_container_data[ filter_container ].find(filter_selector);
			var final_quicksand_selector = '#' + filter_container;
			jQuery(final_quicksand_selector).quicksand($filteredData, {
				duration : 350,
				adjustWidth : false,
				adjustHeight : 'dynamic',
				useScaling : false,
				retainExisting : false
			});
			setTimeout(function() {
				jQuery(window).resize();
			}, 350);
			return false;
		});
	});
}

jQuery(function() {
	triggerCerchezQuickSandInit(document);
});